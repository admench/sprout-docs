<!DOCTYPE html> <html lang="en-US">   <head>     <meta charset="utf-8">     <meta name="viewport" content="width=device-width,initial-scale=1">     <title>Custom SQL Queries - Sprout Documentation</title><meta name="description" content="One reason Craft is powerful is because it allows users to build complex relational content from a very user-friendly UI. While that is nice for users, it can make certain queries very complex when retrieving your data.  Sprout Reports is designed to help make it easy for clients to run queries and get back the data they need. It is not designed to write those queries for you."><link rel="canonical" href="https://sprout.barrelstrengthdesign.com/docs/reports/sql-queries.html"><meta property="og:type" content="article"><meta property="og:site_name" content="Sprout Documentation"><meta property="og:url" content="https://sprout.barrelstrengthdesign.com/docs/reports/sql-queries.html"><meta property="og:title" content="Custom SQL Queries - Sprout Documentation"><meta property="og:description" content="One reason Craft is powerful is because it allows users to build complex relational content from a very user-friendly UI. While that is nice for users, it can make certain queries very complex when retrieving your data.  Sprout Reports is designed to help make it easy for clients to run queries and get back the data they need. It is not designed to write those queries for you."><meta property="og:image" content="https://s3.amazonaws.com/sprout.barrelstrengthdesign.com-assets/content/plugins/sprout-plugins-logo.png"><meta property="og:image:secure_url" content="https://s3.amazonaws.com/sprout.barrelstrengthdesign.com-assets/content/plugins/sprout-plugins-logo.png"><meta property="og:image:height" content="200"><meta property="og:image:width" content="200"><meta property="og:image:type" content="image/png"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://sprout.barrelstrengthdesign.com/docs/reports/sql-queries.html"><meta name="twitter:site" content="@Barrel_Strength"><meta name="twitter:title" content="Custom SQL Queries - Sprout Documentation"><meta name="twitter:description" content="One reason Craft is powerful is because it allows users to build complex relational content from a very user-friendly UI. While that is nice for users, it can make certain queries very complex when retrieving your data.  Sprout Reports is designed to help make it easy for clients to run queries and get back the data they need. It is not designed to write those queries for you."><meta name="twitter:image" content="https://s3.amazonaws.com/sprout.barrelstrengthdesign.com-assets/content/plugins/sprout-plugins-logo.png">          <meta name="generator" content="VuePress 1.3.0">               <link rel="preload" href="/docs/assets/css/0.styles.13173d6e.css" as="style"><link rel="preload" href="/docs/assets/js/app.eeb077d6.js" as="script"><link rel="preload" href="/docs/assets/js/3.cebffabe.js" as="script"><link rel="preload" href="/docs/assets/js/167.0760f2f5.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.96ae0fc2.js"><link rel="prefetch" href="/docs/assets/js/100.7f333b1b.js"><link rel="prefetch" href="/docs/assets/js/101.d4a36c10.js"><link rel="prefetch" href="/docs/assets/js/102.68c3c651.js"><link rel="prefetch" href="/docs/assets/js/103.5f31c76d.js"><link rel="prefetch" href="/docs/assets/js/104.e41725c7.js"><link rel="prefetch" href="/docs/assets/js/105.ee9a485f.js"><link rel="prefetch" href="/docs/assets/js/106.17ec3ef4.js"><link rel="prefetch" href="/docs/assets/js/107.bdf422b5.js"><link rel="prefetch" href="/docs/assets/js/108.d67f90ea.js"><link rel="prefetch" href="/docs/assets/js/109.cb4e7dca.js"><link rel="prefetch" href="/docs/assets/js/11.a28a6881.js"><link rel="prefetch" href="/docs/assets/js/110.5dc9ca1a.js"><link rel="prefetch" href="/docs/assets/js/111.a3b7bb8d.js"><link rel="prefetch" href="/docs/assets/js/112.7789fe19.js"><link rel="prefetch" href="/docs/assets/js/113.f9a81b20.js"><link rel="prefetch" href="/docs/assets/js/114.f20e974f.js"><link rel="prefetch" href="/docs/assets/js/115.375c8fa4.js"><link rel="prefetch" href="/docs/assets/js/116.fd61326b.js"><link rel="prefetch" href="/docs/assets/js/117.8d416ba2.js"><link rel="prefetch" href="/docs/assets/js/118.c6c14759.js"><link rel="prefetch" href="/docs/assets/js/119.1c87cbd7.js"><link rel="prefetch" href="/docs/assets/js/12.10196893.js"><link rel="prefetch" href="/docs/assets/js/120.c9fc8799.js"><link rel="prefetch" href="/docs/assets/js/121.c5a48220.js"><link rel="prefetch" href="/docs/assets/js/122.c9c21d18.js"><link rel="prefetch" href="/docs/assets/js/123.857f6276.js"><link rel="prefetch" href="/docs/assets/js/124.f93483db.js"><link rel="prefetch" href="/docs/assets/js/125.fe75c33d.js"><link rel="prefetch" href="/docs/assets/js/126.12cb6abf.js"><link rel="prefetch" href="/docs/assets/js/127.0f2b18f6.js"><link rel="prefetch" href="/docs/assets/js/128.5d23386b.js"><link rel="prefetch" href="/docs/assets/js/129.dac5db50.js"><link rel="prefetch" href="/docs/assets/js/13.6639f591.js"><link rel="prefetch" href="/docs/assets/js/130.25a5459b.js"><link rel="prefetch" href="/docs/assets/js/131.4705d57c.js"><link rel="prefetch" href="/docs/assets/js/132.6a31d8e2.js"><link rel="prefetch" href="/docs/assets/js/133.aefc8714.js"><link rel="prefetch" href="/docs/assets/js/134.65b94a54.js"><link rel="prefetch" href="/docs/assets/js/135.93d2e0e6.js"><link rel="prefetch" href="/docs/assets/js/136.55c660f6.js"><link rel="prefetch" href="/docs/assets/js/137.a4f70325.js"><link rel="prefetch" href="/docs/assets/js/138.81dfdbc9.js"><link rel="prefetch" href="/docs/assets/js/139.3a9fe509.js"><link rel="prefetch" href="/docs/assets/js/14.107c6ef6.js"><link rel="prefetch" href="/docs/assets/js/140.dc6a348b.js"><link rel="prefetch" href="/docs/assets/js/141.424d1628.js"><link rel="prefetch" href="/docs/assets/js/142.94208a2e.js"><link rel="prefetch" href="/docs/assets/js/143.0bf5891e.js"><link rel="prefetch" href="/docs/assets/js/144.de536461.js"><link rel="prefetch" href="/docs/assets/js/145.5a0ce536.js"><link rel="prefetch" href="/docs/assets/js/146.635b8257.js"><link rel="prefetch" href="/docs/assets/js/147.5f127eae.js"><link rel="prefetch" href="/docs/assets/js/148.ed72179a.js"><link rel="prefetch" href="/docs/assets/js/149.9449d46c.js"><link rel="prefetch" href="/docs/assets/js/15.92c01b9d.js"><link rel="prefetch" href="/docs/assets/js/150.86f6c099.js"><link rel="prefetch" href="/docs/assets/js/151.b9d6c62b.js"><link rel="prefetch" href="/docs/assets/js/152.f6e42048.js"><link rel="prefetch" href="/docs/assets/js/153.905ebc6a.js"><link rel="prefetch" href="/docs/assets/js/154.b7e8669e.js"><link rel="prefetch" href="/docs/assets/js/155.265cc86d.js"><link rel="prefetch" href="/docs/assets/js/156.20ada4b6.js"><link rel="prefetch" href="/docs/assets/js/157.e969317b.js"><link rel="prefetch" href="/docs/assets/js/158.1f7b9e01.js"><link rel="prefetch" href="/docs/assets/js/159.e6d158fb.js"><link rel="prefetch" href="/docs/assets/js/16.1df0d568.js"><link rel="prefetch" href="/docs/assets/js/160.1d3b7135.js"><link rel="prefetch" href="/docs/assets/js/161.e0b61202.js"><link rel="prefetch" href="/docs/assets/js/162.9132c7dc.js"><link rel="prefetch" href="/docs/assets/js/163.40c38c77.js"><link rel="prefetch" href="/docs/assets/js/164.05ab9007.js"><link rel="prefetch" href="/docs/assets/js/165.400b76c3.js"><link rel="prefetch" href="/docs/assets/js/166.6eca6f1e.js"><link rel="prefetch" href="/docs/assets/js/168.70d384f1.js"><link rel="prefetch" href="/docs/assets/js/169.c5765531.js"><link rel="prefetch" href="/docs/assets/js/17.42094b30.js"><link rel="prefetch" href="/docs/assets/js/170.b03f6b74.js"><link rel="prefetch" href="/docs/assets/js/171.35b6289a.js"><link rel="prefetch" href="/docs/assets/js/172.dce78510.js"><link rel="prefetch" href="/docs/assets/js/173.c1ad2729.js"><link rel="prefetch" href="/docs/assets/js/174.150efdaa.js"><link rel="prefetch" href="/docs/assets/js/175.6d0ffa77.js"><link rel="prefetch" href="/docs/assets/js/176.64013d3f.js"><link rel="prefetch" href="/docs/assets/js/177.45eb1b29.js"><link rel="prefetch" href="/docs/assets/js/178.2825c32a.js"><link rel="prefetch" href="/docs/assets/js/179.d8af6ddf.js"><link rel="prefetch" href="/docs/assets/js/18.965dea66.js"><link rel="prefetch" href="/docs/assets/js/180.2fdb0bb9.js"><link rel="prefetch" href="/docs/assets/js/181.f8abadb6.js"><link rel="prefetch" href="/docs/assets/js/182.49a4f794.js"><link rel="prefetch" href="/docs/assets/js/183.83648a2a.js"><link rel="prefetch" href="/docs/assets/js/184.dc29d245.js"><link rel="prefetch" href="/docs/assets/js/185.23b0b560.js"><link rel="prefetch" href="/docs/assets/js/186.cc032a3a.js"><link rel="prefetch" href="/docs/assets/js/187.dbf99f1d.js"><link rel="prefetch" href="/docs/assets/js/188.10de4a01.js"><link rel="prefetch" href="/docs/assets/js/189.de0c258b.js"><link rel="prefetch" href="/docs/assets/js/19.93e18f90.js"><link rel="prefetch" href="/docs/assets/js/190.6b6b9cac.js"><link rel="prefetch" href="/docs/assets/js/191.efdec6cf.js"><link rel="prefetch" href="/docs/assets/js/192.bde85327.js"><link rel="prefetch" href="/docs/assets/js/193.08673081.js"><link rel="prefetch" href="/docs/assets/js/194.8017e9f8.js"><link rel="prefetch" href="/docs/assets/js/195.b34410e2.js"><link rel="prefetch" href="/docs/assets/js/196.9c6135a9.js"><link rel="prefetch" href="/docs/assets/js/197.518e0a05.js"><link rel="prefetch" href="/docs/assets/js/198.1957c11b.js"><link rel="prefetch" href="/docs/assets/js/199.e615406f.js"><link rel="prefetch" href="/docs/assets/js/20.dfd4ac53.js"><link rel="prefetch" href="/docs/assets/js/200.a2edb009.js"><link rel="prefetch" href="/docs/assets/js/201.e4e7c673.js"><link rel="prefetch" href="/docs/assets/js/202.e92ca5b6.js"><link rel="prefetch" href="/docs/assets/js/203.74ddd14f.js"><link rel="prefetch" href="/docs/assets/js/204.e5c2b8b2.js"><link rel="prefetch" href="/docs/assets/js/21.e77ee03d.js"><link rel="prefetch" href="/docs/assets/js/22.cb3cad71.js"><link rel="prefetch" href="/docs/assets/js/23.88b0484d.js"><link rel="prefetch" href="/docs/assets/js/24.41b16aa6.js"><link rel="prefetch" href="/docs/assets/js/25.aebf7ce6.js"><link rel="prefetch" href="/docs/assets/js/26.6dc2ffef.js"><link rel="prefetch" href="/docs/assets/js/27.1d5b9d6c.js"><link rel="prefetch" href="/docs/assets/js/28.9582625a.js"><link rel="prefetch" href="/docs/assets/js/29.b3cbb259.js"><link rel="prefetch" href="/docs/assets/js/30.7cda29d7.js"><link rel="prefetch" href="/docs/assets/js/31.c3e658b3.js"><link rel="prefetch" href="/docs/assets/js/32.8b35c9af.js"><link rel="prefetch" href="/docs/assets/js/33.bd2139e4.js"><link rel="prefetch" href="/docs/assets/js/34.38b59877.js"><link rel="prefetch" href="/docs/assets/js/35.c8fdeed3.js"><link rel="prefetch" href="/docs/assets/js/36.98c62e08.js"><link rel="prefetch" href="/docs/assets/js/37.f5726cb1.js"><link rel="prefetch" href="/docs/assets/js/38.ea37d208.js"><link rel="prefetch" href="/docs/assets/js/39.ca9db9e4.js"><link rel="prefetch" href="/docs/assets/js/4.208c282b.js"><link rel="prefetch" href="/docs/assets/js/40.bc7d5c6c.js"><link rel="prefetch" href="/docs/assets/js/41.ddb5b129.js"><link rel="prefetch" href="/docs/assets/js/42.2917ea65.js"><link rel="prefetch" href="/docs/assets/js/43.5a72a717.js"><link rel="prefetch" href="/docs/assets/js/44.0d52b1f6.js"><link rel="prefetch" href="/docs/assets/js/45.2f8adc95.js"><link rel="prefetch" href="/docs/assets/js/46.e136c829.js"><link rel="prefetch" href="/docs/assets/js/47.c07254b5.js"><link rel="prefetch" href="/docs/assets/js/48.ffefcb2c.js"><link rel="prefetch" href="/docs/assets/js/49.efc7363d.js"><link rel="prefetch" href="/docs/assets/js/5.237850c3.js"><link rel="prefetch" href="/docs/assets/js/50.6b89f087.js"><link rel="prefetch" href="/docs/assets/js/51.60bcd4ff.js"><link rel="prefetch" href="/docs/assets/js/52.249ad0b3.js"><link rel="prefetch" href="/docs/assets/js/53.ccf9aad4.js"><link rel="prefetch" href="/docs/assets/js/54.320caa4a.js"><link rel="prefetch" href="/docs/assets/js/55.658e7a02.js"><link rel="prefetch" href="/docs/assets/js/56.d14a8405.js"><link rel="prefetch" href="/docs/assets/js/57.e77112d8.js"><link rel="prefetch" href="/docs/assets/js/58.0f257c9e.js"><link rel="prefetch" href="/docs/assets/js/59.cfb6b203.js"><link rel="prefetch" href="/docs/assets/js/6.3f84854d.js"><link rel="prefetch" href="/docs/assets/js/60.7f6570d3.js"><link rel="prefetch" href="/docs/assets/js/61.e7e02916.js"><link rel="prefetch" href="/docs/assets/js/62.111d153c.js"><link rel="prefetch" href="/docs/assets/js/63.0ae1db07.js"><link rel="prefetch" href="/docs/assets/js/64.41b4ac74.js"><link rel="prefetch" href="/docs/assets/js/65.38977865.js"><link rel="prefetch" href="/docs/assets/js/66.dac9021d.js"><link rel="prefetch" href="/docs/assets/js/67.a7cb92e1.js"><link rel="prefetch" href="/docs/assets/js/68.65fd51a4.js"><link rel="prefetch" href="/docs/assets/js/69.032df607.js"><link rel="prefetch" href="/docs/assets/js/7.0939e2f3.js"><link rel="prefetch" href="/docs/assets/js/70.ee2066ae.js"><link rel="prefetch" href="/docs/assets/js/71.6a344845.js"><link rel="prefetch" href="/docs/assets/js/72.3e47e019.js"><link rel="prefetch" href="/docs/assets/js/73.bfb6fb90.js"><link rel="prefetch" href="/docs/assets/js/74.351a0f6e.js"><link rel="prefetch" href="/docs/assets/js/75.3b4683ea.js"><link rel="prefetch" href="/docs/assets/js/76.52e2233e.js"><link rel="prefetch" href="/docs/assets/js/77.62504d88.js"><link rel="prefetch" href="/docs/assets/js/78.0e4467af.js"><link rel="prefetch" href="/docs/assets/js/79.1f8d84ea.js"><link rel="prefetch" href="/docs/assets/js/8.acc64e20.js"><link rel="prefetch" href="/docs/assets/js/80.11b29f7e.js"><link rel="prefetch" href="/docs/assets/js/81.f19d250d.js"><link rel="prefetch" href="/docs/assets/js/82.adf861f2.js"><link rel="prefetch" href="/docs/assets/js/83.bd04d463.js"><link rel="prefetch" href="/docs/assets/js/84.42d9a7d3.js"><link rel="prefetch" href="/docs/assets/js/85.f2be1b16.js"><link rel="prefetch" href="/docs/assets/js/86.7d08378b.js"><link rel="prefetch" href="/docs/assets/js/87.8df16eea.js"><link rel="prefetch" href="/docs/assets/js/88.c1a5beef.js"><link rel="prefetch" href="/docs/assets/js/89.fde6a0b3.js"><link rel="prefetch" href="/docs/assets/js/9.f6ba011d.js"><link rel="prefetch" href="/docs/assets/js/90.2c5bc321.js"><link rel="prefetch" href="/docs/assets/js/91.f57c2470.js"><link rel="prefetch" href="/docs/assets/js/92.cbbb6919.js"><link rel="prefetch" href="/docs/assets/js/93.d8f0a60f.js"><link rel="prefetch" href="/docs/assets/js/94.fc6678b7.js"><link rel="prefetch" href="/docs/assets/js/95.d02ce9c7.js"><link rel="prefetch" href="/docs/assets/js/96.8965417f.js"><link rel="prefetch" href="/docs/assets/js/97.0c2076e2.js"><link rel="prefetch" href="/docs/assets/js/98.a485cfcb.js"><link rel="prefetch" href="/docs/assets/js/99.4952f5a4.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.4cd6cf87.js">     <link rel="stylesheet" href="/docs/assets/css/0.styles.13173d6e.css">   </head>   <body>     <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewbox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Sprout Documentation</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Plugin Docs" class="dropdown-title"><span class="title">Plugin Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/forms/" class="nav-link">   Sprout Forms </a></li><li class="dropdown-item"><!----> <a href="/docs/seo/" class="nav-link">   Sprout SEO </a></li><li class="dropdown-item"><!----> <a href="/docs/redirects/" class="nav-link">   Sprout Redirects </a></li><li class="dropdown-item"><!----> <a href="/docs/sitemaps/" class="nav-link">   Sprout Sitemaps </a></li><li class="dropdown-item"><!----> <a href="/docs/email/" class="nav-link">   Sprout Email </a></li><li class="dropdown-item"><!----> <a href="/docs/reports/" class="nav-link router-link-active">   Sprout Reports </a></li><li class="dropdown-item"><!----> <a href="/docs/import/" class="nav-link">   Sprout Import </a></li><li class="dropdown-item"><!----> <a href="/docs/reports/.html" class="nav-link">   – </a></li><li class="dropdown-item"><!----> <a href="/docs/active/" class="nav-link">   Sprout Active </a></li><li class="dropdown-item"><!----> <a href="/docs/encode-email/" class="nav-link">   Sprout Encode Email </a></li><li class="dropdown-item"><!----> <a href="/docs/fields/" class="nav-link">   Sprout Fields </a></li><li class="dropdown-item"><!----> <a href="/docs/lists/" class="nav-link">   Sprout Lists </a></li><li class="dropdown-item"><!----> <a href="/docs/notes/" class="nav-link">   Sprout Notes </a></li></ul></div></div><div class="nav-item"><a href="https://sprout.barrelstrengthdesign.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">   Back to Sprout →   <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Plugin Docs" class="dropdown-title"><span class="title">Plugin Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/forms/" class="nav-link">   Sprout Forms </a></li><li class="dropdown-item"><!----> <a href="/docs/seo/" class="nav-link">   Sprout SEO </a></li><li class="dropdown-item"><!----> <a href="/docs/redirects/" class="nav-link">   Sprout Redirects </a></li><li class="dropdown-item"><!----> <a href="/docs/sitemaps/" class="nav-link">   Sprout Sitemaps </a></li><li class="dropdown-item"><!----> <a href="/docs/email/" class="nav-link">   Sprout Email </a></li><li class="dropdown-item"><!----> <a href="/docs/reports/" class="nav-link router-link-active">   Sprout Reports </a></li><li class="dropdown-item"><!----> <a href="/docs/import/" class="nav-link">   Sprout Import </a></li><li class="dropdown-item"><!----> <a href="/docs/reports/.html" class="nav-link">   – </a></li><li class="dropdown-item"><!----> <a href="/docs/active/" class="nav-link">   Sprout Active </a></li><li class="dropdown-item"><!----> <a href="/docs/encode-email/" class="nav-link">   Sprout Encode Email </a></li><li class="dropdown-item"><!----> <a href="/docs/fields/" class="nav-link">   Sprout Fields </a></li><li class="dropdown-item"><!----> <a href="/docs/lists/" class="nav-link">   Sprout Lists </a></li><li class="dropdown-item"><!----> <a href="/docs/notes/" class="nav-link">   Sprout Notes </a></li></ul></div></div><div class="nav-item"><a href="https://sprout.barrelstrengthdesign.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">   Back to Sprout →   <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/" class="sidebar-link">← All Plugins</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/reports/" class="sidebar-link">About Sprout Reports</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Core Concepts</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/reports/data-sources.html" class="sidebar-link">Data Sources</a></li><li><a href="/docs/reports/reports.html" class="sidebar-link">Reports</a></li><li><a href="/docs/reports/mailing-lists.html" class="sidebar-link">Mailing Lists</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Data Sources</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/reports/custom-query-report.html" class="sidebar-link">Custom Query Reports</a></li><li><a href="/docs/reports/custom-twig-template-report.html" class="sidebar-link">Twig Template Reports</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Examples</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/reports/html-vs-csv-reports.html" class="sidebar-link">HTML vs CSV</a></li><li><a href="/docs/reports/large-reports.html" class="sidebar-link">Large Reports</a></li><li><a href="/docs/reports/sql-queries.html" class="active sidebar-link">Custom SQL Queries</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/reports/sql-queries.html#relations-fields" class="sidebar-link">Relations Fields</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/reports/custom-data-sources.html" class="sidebar-link">Data Sources</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installing &amp; Updating</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/reports/installing-and-updating-craft-3.html" class="sidebar-link">Craft 3</a></li><li><a href="/docs/reports/installing-and-updating-craft-2.html" class="sidebar-link">Craft 2</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>Custom SQL Queries</h1> <p>One reason Craft is powerful is because it allows users to build complex relational content from a very user-friendly UI. While that is nice for users, it can make certain queries very complex when retrieving your data.  Sprout Reports is designed to help make it easy for clients to run queries and get back the data they need. It is not designed to write those queries for you.</p> <p>The examples below are not meant to be comprehensive or accurate for every situation. They are meant to be used as a starting point and the responsibility is on you to update the queries to meet your needs or find someone who can.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you need help building a specific query, feel free to reach out.  We're happy to consider adding another example for common use cases or help out in a consulting relationship to help you meet your projects reporting needs.</p> <p>Contact us: <a href="mailto:sprout@barrelstrengthdesign.com">sprout@barrelstrengthdesign.com</a></p></div> <h2 id="relations-fields"><a href="#relations-fields" class="header-anchor">#</a> Relations Fields</h2> <p>Relation Fields (Entries, Categories, Users, Assets, and Tag fields) store their data via a related ID. This means a basic query will not return any information about the Relations Fields in an Entry.</p> <div><p>In this example, we create two queries: the first returning the data about our content from a particular section without the relation data and the second returning the data about all of the content related to our section.  We then use a <code>UNION</code> to combine the results of our two queries.</p></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> content<span class="token punctuation">.</span>id<span class="token punctuation">,</span>         content<span class="token punctuation">.</span>title<span class="token punctuation">,</span>        <span class="token boolean">null</span> <span class="token keyword">as</span> <span class="token string">&quot;Related IDs (comma-separated)&quot;</span><span class="token punctuation">,</span>        <span class="token boolean">null</span> <span class="token keyword">as</span> <span class="token string">&quot;Related Titles (comma-separated)&quot;</span> <span class="token keyword">FROM</span> craft_content <span class="token keyword">AS</span> content <span class="token keyword">JOIN</span> craft_entries <span class="token keyword">AS</span> entries 	<span class="token keyword">ON</span> entries<span class="token punctuation">.</span>id <span class="token operator">=</span> content<span class="token punctuation">.</span>elementId <span class="token keyword">JOIN</span> craft_relations <span class="token keyword">AS</span> relations 	<span class="token keyword">ON</span> entries<span class="token punctuation">.</span>id <span class="token operator">=</span> relations<span class="token punctuation">.</span>sourceId <span class="token keyword">WHERE</span> entries<span class="token punctuation">.</span>sectionId <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">UNION</span> <span class="token keyword">SELECT</span> relations<span class="token punctuation">.</span>targetId <span class="token keyword">AS</span> relatedElementId<span class="token punctuation">,</span> 	   content<span class="token punctuation">.</span>title <span class="token keyword">AS</span> relatedContentTitle<span class="token punctuation">,</span> 	   GROUP_CONCAT<span class="token punctuation">(</span>content<span class="token punctuation">.</span>elementId separator <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;Related IDs (comma-separated)&quot;</span><span class="token punctuation">,</span> 	   GROUP_CONCAT<span class="token punctuation">(</span>content<span class="token punctuation">.</span>title separator <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;Related Titles (comma-separated)&quot;</span> <span class="token keyword">FROM</span> craft_relations <span class="token keyword">AS</span> relations <span class="token keyword">JOIN</span> craft_entries <span class="token keyword">AS</span> entries 	<span class="token keyword">ON</span> entries<span class="token punctuation">.</span>id <span class="token operator">=</span> relations<span class="token punctuation">.</span>sourceId <span class="token keyword">JOIN</span> craft_content <span class="token keyword">AS</span> content 	<span class="token keyword">ON</span> relations<span class="token punctuation">.</span>targetId <span class="token operator">=</span> content<span class="token punctuation">.</span>elementId <span class="token keyword">WHERE</span> relations<span class="token punctuation">.</span>sourceId <span class="token operator">=</span> entries<span class="token punctuation">.</span>id <span class="token operator">AND</span> entries<span class="token punctuation">.</span>sectionId <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> relations<span class="token punctuation">.</span>sourceId </code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/barrelstrength/sprout-docs/edit/develop/docs/reports/sql-queries.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">       ←       <a href="/docs/reports/large-reports.html" class="prev">         Large Reports       </a></span> <span class="next"><a href="/docs/reports/custom-data-sources.html">         Data Sources       </a>       →     </span></p></div> </main></div><div class="global-ui"></div></div>     <script src="/docs/assets/js/app.eeb077d6.js" defer></script><script src="/docs/assets/js/3.cebffabe.js" defer></script><script src="/docs/assets/js/167.0760f2f5.js" defer></script>   </body> </html>